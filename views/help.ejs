<!doctype html>
<html>
  <head>
    <title>Socket.IO chat</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
<script src="https://cdn.socket.io/socket.io-1.3.7.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<style src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css"></style>

  </head>
  <body>
    <input id="roomname" type="text" class="form-control" placeholder="Room Name" aria-describedby="basic-addon1">
  <button id="addroom"type="button" class="btn btn-primary">Add Room</button>
  <ul id="roomList">
  </ul>


<script>
  var socket = io.connect("http://localhost:50000/roomlist");
  socket.on("connect",function(){
    console.log("connection est");
  })

  $("#addroom").click(function(){
    var roomName=$("#roomname").val();
    if(roomName!=''){
      var roomNumber= parseInt(Math.random()*10000);
      socket.emit('newRoom',{roomName:roomName, roomNumber:roomNumber});
      $("#roomname").val('');
    }
  });

  socket.on("roomUpdate",function(data){
    var procData=JSON.parse(data);
    for (var i =0;i<procData.length;i++){
      var str='<a href=room/'+procData[i].roomNumber +'><li>' +procData[i].roomName +'</li></a>'
      $("#roomList").prepend(str);
    }
  })
</script>
  </body>
</html>